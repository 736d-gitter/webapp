<html>
<head>
<script type="text/javascript"
        src="/js/libs/faye/0.8.8/faye-browser-min.js">
        </script>
<script type="text/javascript">


var ClientAuth = function() {};

ClientAuth.prototype.outgoing = function(message, callback) {
  message.ext = message.ext || {};
  message.ext.token = "1f1f3bc1-ec53-4570-ae10-cd3cfe910554";
  callback(message);
};


var client = new Faye.Client('http://localhost:5000/faye');
client.addExtension(new ClientAuth());

client.bind('transport:down', function() {
  // the client is offline
  console.log("TRANSPORT DOWN");
});

client.bind('transport:up', function() {
  // the client is online
  console.log("TRANSPORT UP");
});

client.publish('/foo', {text: 'Hi there'});

var subscription = client.subscribe('/foo', function(message) {
  console.log("MESSAGE!", message);
});

</script>
</head>

<body>

</body>
</html>