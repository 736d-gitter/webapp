<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Gitter Webapp browser tests</title>
  <!-- Mocha styles -->
  <link href="https://cdn.rawgit.com/mochajs/mocha/2.2.5/mocha.css" rel="stylesheet" />

  <!-- Mocha JS-->
  <script src="https://cdn.rawgit.com/jquery/jquery/2.1.4/dist/jquery.min.js"></script>
  <script src="https://cdn.rawgit.com/Automattic/expect.js/0.3.1/index.js"></script>
  <script src="https://cdn.rawgit.com/mochajs/mocha/v2.5.3/mocha.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/sinon.js/1.15.4/sinon.min.js"></script>
  <script>mocha.setup('bdd')</script>

  <!-- Tests -->
  <script src="http://localhost:9192"></script>
  <script src='/fixtures/build/test.js'></script>
</head>
<body>
<div id="mocha"></div>
<script>
  // This should allow errors to fall through to the devTools console
  // But doesn't seem to be working :/
  mocha.allowUncaught();
  mocha.checkLeaks();
  mocha.globals(['BrowserStack', 'troupeContext']);
  window.onerror = function(err) {
    console.log('-----------------------');
    console.log(err);
    console.log('-----------------------');
  };
  window.onload = function(){
    console.log('STARTED');
    mocha.run(function(){
      console.log('FINISHED');
      mocha.bail();
    });
  }
</script>
</body>
</html>
